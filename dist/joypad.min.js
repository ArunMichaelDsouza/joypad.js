!function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o={events:{},publish:function(t,e){this.events.hasOwnProperty(t)&&this.events[t].forEach(t=>t(e))},subscribe:function(t,e){return this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].push(e),{unsubscribe:function(){this.events[t].splice(this.events[t].indexOf(e),1)}.bind(this)}}};const s={NATIVE:"gamepadconnected",ALIAS:"connect"},i={NATIVE:"gamepaddisconnected",ALIAS:"disconnect"},r={NATIVE:null,ALIAS:"button_press"},a={NATIVE:null,ALIAS:"axis_move"},c={NAME:"left_stick",AXES:{X:0,Y:1}},u={NAME:"right_stick",AXES:{X:2,Y:3}},d="left",l="right",p="top",A="bottom",f=t=>{const e=window.navigator.getGamepads();Object.keys(e).length&&Object.keys(e).forEach(n=>{const o=e[n];if(o)return t(o,n)})},h=t=>{console.warn&&"function"==typeof console.warn?console.warn(t):console.log(t)};var b={loopStarted:!1,list:{},settings:{buttonPressThreshold:150,axisMovementThreshold:.8},remove:function(t){return delete this.list[t]},on:function(t,e){switch(t){case s.ALIAS:o.subscribe(s.ALIAS,e);break;case i.ALIAS:o.subscribe(i.ALIAS,e);break;case r.ALIAS:o.subscribe(r.ALIAS,e);break;case a.ALIAS:o.subscribe(a.ALIAS,e)}},vibrate:function(t,e){const{vibrationActuator:n}=t;if((t=>t&&t.type&&t.playEffect&&"function"==typeof t.playEffect)(n)){const{type:o}=n;return t.vibrationActuator.playEffect(o,e)}h("No vibration actuator interface found - https://developer.mozilla.org/en-US/docs/Web/API/GamepadHapticActuator")},set:function(t){const{buttonPressThreshold:e,axisMovementThreshold:n}=t;this.settings.buttonPressThreshold=e,this.settings.axisMovementThreshold=n}};var v={id:null,updateGamepadInstances:function(){f((t,e)=>b.list[e]=t)},start:function(){const t=window.requestAnimationFrame||window.webkitRequestAnimationFrame;this.id=t(this.start.bind(this)),b.loopStarted=!0,this.updateGamepadInstances(),m(this.id),w()},stop:function(t){return(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)(t)},restart:function(t){const{buttonPressThreshold:e}=b.settings;return this.stop(t),setTimeout(()=>{this.start()},e)}};const m=t=>{return f(e=>{e.buttons.forEach((n,o)=>{if(n.pressed){const s={button:n,index:o,gamepad:e};return window.dispatchEvent((t=>new CustomEvent(r.ALIAS,{detail:t}))(s)),v.restart(t)}})})},w=()=>{const{axisMovementThreshold:t}=b.settings;return f(e=>{const{axes:n}=e,o=n.length/2;n.forEach((n,s)=>{if(Math.abs(n)>t){let t=null,i=null,r=n;t=s<o?c.NAME:u.NAME,s!==c.AXES.X&&s!==u.AXES.X||(i=n<0?d:l),s!==c.AXES.Y&&s!==u.AXES.Y||(i=n<0?p:A);const f={gamepad:e,totalSticks:o,stickMoved:t,directionOfMovement:i,axisMovementValue:r};return window.dispatchEvent((t=>new CustomEvent(a.ALIAS,{detail:t}))(f))}})})};window.addEventListener(s.NATIVE,t=>{if(o.publish(s.ALIAS,t),!b.loopStarted)return v.start()}),window.addEventListener(i.NATIVE,t=>{if(o.publish(i.ALIAS,t),b.remove(t.gamepad.index),!Object.keys(b.list).length)return b.loopStarted=!1,v.stop(v.id)}),window.addEventListener(r.ALIAS,t=>o.publish(r.ALIAS,t)),window.addEventListener(a.ALIAS,t=>o.publish(a.ALIAS,t)),(()=>window.navigator.getGamepads&&"function"==typeof window.navigator.getGamepads)()?window.joypad=b:h("Your browser does not support the Gamepad API - https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API")}]);